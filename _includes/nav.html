<!-- This finds the current page so it can be highlighted. -->

{% for entry in site.data.navigation %}
  {% capture fullurl %}{{ site.baseurl }}{{ entry.url }}{% endcapture %}
  {% if entry.url == page.url %}
    {% assign current_page = fullurl %}
    {% break %}
  {% elsif page.url contains fullurl %}
    {% assign current_page = fullurl %}
  {% endif %}
{% endfor %}

<!-- Then we build the nav bar. -->
<nav class="side-nav">
  <h3>Table of contents</h3>
  <div>page.url {{page.url}}</div>
  <div>fullurl {{fullurl}}</div>
  <div>current_page {{current_page}}</div>

  <ul>
    {% for entry in site.data.navigation %}
      {% include nav-item.html %}
    {% endfor %}
  </ul>
</nav>
